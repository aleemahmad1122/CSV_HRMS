

<form [formGroup]="addEditForm" class="form w-100" id="kt_form_1" (ngSubmit)="submitForm()">
  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label">{{ "language.form.departmentId" | translate }}
        <span class="text-danger">*</span></label>
      @if(isEdit){

        <ng-select
        [items]="departmentList"
        bindLabel="name"
        bindValue="departmentId"
        formControlName="departmentId"
        [searchable]="true"
        [ngClass]="{
          'is-invalid':
            addEditForm.get('departmentId')?.invalid &&
            (addEditForm.get('departmentId')?.touched || isSubmitted)
        }" [disabled]="isViewMode"
        placeholder="Select an option" >
      </ng-select>
 }
      <div *ngIf="!isEdit">
        <input
          type="text"
          class="form-control"
          [value]="getDepartmentName(addEditForm.get('departmentId')?.value)"
          readonly>
      </div>
      <div *ngIf="
          addEditForm.get('departmentId')?.invalid &&
          (addEditForm.get('departmentId')?.touched || isSubmitted)
        " class="invalid-feedback">
        {{ "language.errors.departmentRequired" | translate }}
      </div>
    </div>

    <div class="col-md-6 mb-3">
      <label class="form-label">{{ "language.form.designationId" | translate }}
        <span class="text-danger">*</span></label>
        @if(isEdit){

          <ng-select
          [items]="designationList"
          bindLabel="designationTitle"
          bindValue="designationId"
          formControlName="designationId"
          [searchable]="true"
          [ngClass]="{
            'is-invalid':
              addEditForm.get('designationId')?.invalid &&
              (addEditForm.get('designationId')?.touched || isSubmitted)
          }" [disabled]="isViewMode"
          placeholder="Select an option" >
        </ng-select> }
      <div *ngIf="!isEdit">
        <input
          type="text"
          class="form-control"
          [value]="getDsignationName(addEditForm.get('designationId')?.value)"
          readonly>
      </div>
      <div *ngIf="
          addEditForm.get('designationId')?.invalid &&
          (addEditForm.get('designationId')?.touched || isSubmitted)
        " class="invalid-feedback">
        {{ "language.errors.designationRequired" | translate }}
      </div>
    </div>

    <div class="col-md-6 mb-3">
      <label class="form-label">{{ "language.form.teamId" | translate }}
        <span class="text-danger">*</span></label>
        @if(isEdit){

          <ng-select
          [items]="teamList"
          bindLabel="name"
          bindValue="teamId"
          formControlName="teamId"
          [searchable]="true"
          [ngClass]="{
            'is-invalid':
              addEditForm.get('teamId')?.invalid &&
              (addEditForm.get('teamId')?.touched || isSubmitted)
          }" [disabled]="isViewMode"
          placeholder="Select an option" >
        </ng-select> }
      <div *ngIf="!isEdit">
        <input
          type="text"
          class="form-control"
          [value]="getTeamName(addEditForm.get('teamId')?.value)"
          readonly>
      </div>
      <div *ngIf="
          addEditForm.get('teamId')?.invalid &&
          (addEditForm.get('teamId')?.touched || isSubmitted)
        " class="invalid-feedback">
        {{ "language.errors.teamRequired" | translate }}
      </div>
    </div>

    <div class="col-md-6 mb-3">
      <label class="form-label">{{ "language.form.reportsTo" | translate }}
        <span class="text-danger">*</span></label>
        @if(isEdit){


          <ng-select
          [items]="reportList"
          bindLabel="employeeName"
          bindValue="employeeId"
          formControlName="reportsTo"
          [searchable]="true"
          [ngClass]="{
            'is-invalid':
              addEditForm.get('reportsTo')?.invalid &&
              (addEditForm.get('reportsTo')?.touched || isSubmitted)
          }" [disabled]="isViewMode"
          placeholder="Select an option" >
        </ng-select>
           }
      <div *ngIf="!isEdit">
        <input
          type="text"
          class="form-control"
          [value]="getReportsToName(addEditForm.get('reportsTo')?.value)"
          readonly>
      </div>
      <div *ngIf="
          addEditForm.get('reportsTo')?.invalid &&
          (addEditForm.get('reportsTo')?.touched || isSubmitted)
        " class="invalid-feedback">
        {{ "language.errors.teamRequired" | translate }}
      </div>
    </div>



  </div>

  <!-- Form submission buttons -->
  @if(isEdit){
  <div class="row mt-3">
    <div class="col-12 text-right">
      <button type="button" class="btn btn-light-danger font-weight-bold button-spacing mx-4" (click)="goBack()">
        {{ "language.generic.back" | translate }}
      </button>
      <button type="submit" class="btn btn-primary font-weight-bold me-3" [disabled]="!this.addEditForm.valid">
        {{
        isEditMode
        ? ("language.generic.update" | translate)
        : ("language.generic.submit" | translate)
        }}
      </button>
    </div>
  </div>
  }
</form>

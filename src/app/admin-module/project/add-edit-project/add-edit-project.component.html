<div class="d-flex flex-column-fluid px-3">
  <div class="card card-custom w-100 p-5" >
  <form [formGroup]="addEditForm" class="form w-100 py-5" id="kt_form_1" (ngSubmit)="submitForm()">
    <div class="row py-5">
      <div class="col-md-6 mb-3">
        <label class="form-label">{{ "language.form.title" | translate }}
          <span class="text-danger">*</span></label>
        <input type="text" class="form-control" formControlName="name"
          [placeholder]="'language.placeholders.title' | translate" [ngClass]="{
            'is-invalid':
              addEditForm.get('name')?.invalid &&
              (addEditForm.get('name')?.touched || isSubmitted)
          }" />
        <div *ngIf="
            addEditForm.get('name')?.invalid &&
            (addEditForm.get('name')?.touched || isSubmitted)
          " class="invalid-feedback">
          {{ "language.errors.titleRequired" | translate }}
        </div>
      </div>

      <div class="col-md-6 mb-3">
        <label class="form-label">
          {{ "language.form.currency" | translate }}
          <span class="text-danger">*</span>
        </label>
        <select class="form-control" formControlName="currency" [ngClass]="{
            'is-invalid':
              addEditForm.get('currency')?.invalid &&
              (addEditForm.get('currency')?.touched || isSubmitted)
          }">
          <option value="" disabled selected>
            {{ "language.placeholders.currency" | translate }}
          </option>
          <option *ngFor="let currency of currencies" [value]="currency">
            {{ currency }}
          </option>
        </select>
        <div *ngIf="
            addEditForm.get('currency')?.invalid &&
            (addEditForm.get('currency')?.touched || isSubmitted)
          " class="invalid-feedback">
          {{ "language.errors.currencyRequired" | translate }}
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label class="form-label">{{ "language.form.startDate" | translate }}
          <span class="text-danger">*</span></label>
        <dp-date-picker class="form-control" formControlName="startDate" placeholder="00/00/00"
          [config]="datePickerConfig" theme="dp-material" (change)="onDateTimeChange($event,'startDate')" [ngClass]="{
            'is-invalid':
              addEditForm.get('startDate')?.invalid &&
              (addEditForm.get('startDate')?.touched || isSubmitted)
          }"></dp-date-picker>

        <div *ngIf="
            addEditForm.get('startDate')?.invalid &&
            (addEditForm.get('startDate')?.touched || isSubmitted)
          " class="invalid-feedback">
          {{ "language.errors.startDateRequired" | translate }}
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">{{ "language.form.endDate" | translate }}
          <span class="text-danger">*</span></label>
        <dp-date-picker class="form-control" formControlName="endDate" [config]="datePickerConfig" theme="dp-material"
          placeholder="00/00/00" (change)="onDateTimeChange($event,'endDate')" [ngClass]="{
            'is-invalid':
              addEditForm.get('endDate')?.invalid &&
              (addEditForm.get('endDate')?.touched || isSubmitted)
          }"></dp-date-picker>

        <div *ngIf="
            addEditForm.get('endDate')?.invalid &&
            (addEditForm.get('endDate')?.touched || isSubmitted)
          " class="invalid-feedback">
          {{ "language.errors.endDateRequired" | translate }}
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label class="form-label">{{ "language.form.status" | translate }}
          <span class="text-danger">*</span></label>
        <select class="form-control" formControlName="statusId">
          <option *ngFor="let stat of status" [value]="stat.statusId">
            {{ stat.statusName }}
          </option>
        </select>
        <div *ngIf="
            addEditForm.get('statusId')?.invalid &&
            (addEditForm.get('statusId')?.touched || isSubmitted)
          " class="invalid-feedback">
          {{ "language.errors.statusRequired" | translate }}
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">{{ "language.form.budget" | translate }}
          <span class="text-danger">*</span></label>
        <input type="number" class="form-control" formControlName="budget"
          [placeholder]="'language.placeholders.budget' | translate" [ngClass]="{
            'is-invalid':
              addEditForm.get('budget')?.invalid &&
              (addEditForm.get('budget')?.touched || isSubmitted)
          }" />
        <div *ngIf="
            addEditForm.get('budget')?.invalid &&
            (addEditForm.get('budget')?.touched || isSubmitted)
          " class="invalid-feedback">
          {{ "language.errors.budgetRequired" | translate }}
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12 mb-3">
        <label class="form-label">{{ "language.form.description" | translate }}
          <span class="text-danger"></span></label>
        <textarea class="form-control" formControlName="description"
          [placeholder]="'language.placeholders.description' | translate" [ngClass]="{
            'is-invalid':
              addEditForm.get('description')?.invalid &&
              (addEditForm.get('description')?.touched || isSubmitted)
          }"></textarea>
        <div *ngIf="
            addEditForm.get('description')?.invalid &&
            (addEditForm.get('description')?.touched || isSubmitted)
          " class="invalid-feedback">
          {{ "language.errors.descriptionRequired" | translate }}
        </div>
      </div>
    </div>

    <!-- Form submission buttons -->
    <div class="row mt-3">
      <div class="col-12 text-right">
        <button type="button" class="btn btn-light-danger font-weight-bold button-spacing mr-3" (click)="goBack()">
          {{ "language.generic.back" | translate }}
        </button>
        <button type="submit" class="btn btn-primary font-weight-bold me-3">
          {{ "language.generic.submit" | translate }}
        </button>
      </div>
    </div>
  </form>
</div>
</div>

<div class="d-flex flex-column-fluid px-3">
  <div class="card card-custom w-100 px-3">
    <form [formGroup]="addEditForm" class="form w-100 py-5" id="kt_form_1" (ngSubmit)="submitForm()">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ "language.form.shiftName" | translate }}
            <span class="text-danger">*</span></label>
          <input type="text" class="form-control" formControlName="shiftName"
            [placeholder]="'language.form.shiftName' | translate" [ngClass]="{
              'is-invalid':
                addEditForm.get('shiftName')?.invalid &&
                (addEditForm.get('shiftName')?.touched || isSubmitted)
            }" />
          <div *ngIf="
              addEditForm.get('shiftName')?.invalid &&
              (addEditForm.get('shiftName')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.shiftNameRequired" | translate }}
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ "language.form.shiftCode" | translate }}
            <span class="text-danger">*</span></label>
          <input type="text" class="form-control" formControlName="shiftCode"
            [placeholder]="'language.form.shiftCode' | translate" [ngClass]="{
              'is-invalid':
                addEditForm.get('shiftCode')?.invalid &&
                (addEditForm.get('shiftCode')?.touched || isSubmitted)
            }" />
          <div *ngIf="
              addEditForm.get('shiftCode')?.invalid &&
              (addEditForm.get('shiftCode')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.shiftCodeRequired" | translate }}
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ "language.generic.startTime" | translate }}
            <span class="text-danger">*</span></label>

          <dp-date-picker class="form-control" [mode]="'time'" formControlName="startTime" placeholder="00:00"
            [config]="datePickerConfig" theme="dp-material" (change)="onDateTimeChange($event,'startTime')" [ngClass]="{
              'is-invalid':
                addEditForm.get('startTime')?.invalid &&
                (addEditForm.get('startTime')?.touched || isSubmitted)
            }"></dp-date-picker>

          <div *ngIf="
              addEditForm.get('startTime')?.invalid &&
              (addEditForm.get('startTime')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.startTimeequired" | translate }}
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ "language.generic.endTime" | translate }}
            <span class="text-danger">*</span></label>
          <dp-date-picker class="form-control" [mode]="'time'" formControlName="endTime" placeholder="00:00"
            [config]="datePickerConfig" theme="dp-material" (change)="onDateTimeChange($event,'endTime')" [ngClass]="{
              'is-invalid':
                addEditForm.get('endTime')?.invalid &&
                (addEditForm.get('endTime')?.touched || isSubmitted)
            }"></dp-date-picker>
          <div *ngIf="
                  addEditForm.get('endTime')?.invalid &&
                  (addEditForm.get('endTime')?.touched || isSubmitted)
                " class="invalid-feedback">
            {{ "language.errors.endTimeequired" | translate }}
          </div>
        </div>
      </div>


      <div class="row">

        <div class="col-md-6 mb-3">
          <label class="form-label">{{ "language.generic.shiftStartsFromPreviousDay" | translate }}
            <span class="text-danger">*</span></label>

          <ng-select [items]="shiftStartsFromPreviousDayOpt" [clearable]="false" [bindLabel]="'label'" [bindValue]="'value'" [searchable]="true"
            placeholder="Select an option" formControlName="shiftStartsFromPreviousDay" [ngClass]="{
    'is-invalid':
            addEditForm.get('shiftStartsFromPreviousDay')?.invalid &&
            (addEditForm.get('shiftStartsFromPreviousDay')?.touched || isSubmitted)
    }">
          </ng-select>
          <div *ngIf="
              addEditForm.get('shiftStartsFromPreviousDay')?.invalid &&
              (addEditForm.get('shiftStartsFromPreviousDay')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.earlyMinutesRequired" | translate }}
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">{{ "language.generic.shiftEndsFromPreviousDay" | translate }}
            <span class="text-danger">*</span></label>

          <ng-select [clearable]="false" [items]="shiftStartsFromPreviousDayOpt" [bindLabel]="'label'" [bindValue]="'value'" [searchable]="true"
            placeholder="Select an option" formControlName="shiftEndsFromPreviousDay" [ngClass]="{
    'is-invalid':
            addEditForm.get('shiftEndsFromPreviousDay')?.invalid &&
            (addEditForm.get('shiftEndsFromPreviousDay')?.touched || isSubmitted)
    }">
          </ng-select>
          <div *ngIf="
              addEditForm.get('shiftEndsFromPreviousDay')?.invalid &&
              (addEditForm.get('shiftEndsFromPreviousDay')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.shiftEndsFromPreviousDayRequired" | translate }}
          </div>
        </div>
      </div>


      <div class="col-md-12 mb-3">
        <label class="form-label">
          {{ "language.generic.workingDays" | translate }}
          <span class="text-danger">*</span>
        </label>

        <div class="d-flex align-item-center py-4" style="gap: 30px;flex-wrap: wrap;">

          <div class="checkbox-wrapper-46">
            <input id="monday" type="checkbox" [checked]="selectedDays.includes('Monday')"
              (change)="onDayChange('Monday', $event)" class="inp-cbx" />
            <label for="monday" class="cbx">
              <span>
                <svg viewBox="0 0 12 10" height="10px" width="12px">
                  <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
              </span>
              <span>{{ "language.generic.monday" | translate }}</span>
            </label>
          </div>
          <div class="checkbox-wrapper-46">
            <input id="tuesday" type="checkbox" [checked]="selectedDays.includes('Tuesday')"
              (change)="onDayChange('Tuesday', $event)" class="inp-cbx" />
            <label for="tuesday" class="cbx">
              <span>
                <svg viewBox="0 0 12 10" height="10px" width="12px">
                  <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
              </span>
              <span>{{ "language.generic.tuesday" | translate }}</span>
            </label>
          </div>

          <div class="checkbox-wrapper-46">
            <input id="wednesday" type="checkbox" [checked]="selectedDays.includes('Wednesday')"
              (change)="onDayChange('Wednesday', $event)" class="inp-cbx" />
            <label for="wednesday" class="cbx">
              <span>
                <svg viewBox="0 0 12 10" height="10px" width="12px">
                  <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
              </span>
              <span>{{ "language.generic.wednesday" | translate }}</span>
            </label>
          </div>

          <div class="checkbox-wrapper-46">
            <input id="thursday" type="checkbox" [checked]="selectedDays.includes('Thursday')"
              (change)="onDayChange('Thursday', $event)" class="inp-cbx" />
            <label for="thursday" class="cbx">
              <span>
                <svg viewBox="0 0 12 10" height="10px" width="12px">
                  <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
              </span>
              <span>{{ "language.generic.thursday" | translate }}</span>
            </label>
          </div>

          <div class="checkbox-wrapper-46">
            <input id="friday" type="checkbox" [checked]="selectedDays.includes('Friday')"
              (change)="onDayChange('Friday', $event)" class="inp-cbx" />
            <label for="friday" class="cbx">
              <span>
                <svg viewBox="0 0 12 10" height="10px" width="12px">
                  <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
              </span>
              <span>{{ "language.generic.friday" | translate }}</span>
            </label>
          </div>

          <div class="checkbox-wrapper-46">
            <input id="saturday" type="checkbox" [checked]="selectedDays.includes('Saturday')"
              (change)="onDayChange('Saturday', $event)" class="inp-cbx" />
            <label for="saturday" class="cbx">
              <span>
                <svg viewBox="0 0 12 10" height="10px" width="12px">
                  <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
              </span>
              <span>{{ "language.generic.saturday" | translate }}</span>
            </label>
          </div>

          <div class="checkbox-wrapper-46">
            <input id="sunday" type="checkbox" [checked]="selectedDays.includes('Sunday')"
              (change)="onDayChange('Sunday', $event)" class="inp-cbx" />
            <label for="sunday" class="cbx">
              <span>
                <svg viewBox="0 0 12 10" height="10px" width="12px">
                  <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
                </svg>
              </span>
              <span>{{ "language.generic.sunday" | translate }}</span>
            </label>
          </div>
        </div>

        <!-- Validation Message -->
        <div *ngIf="
            addEditForm.get('workingDays')?.invalid &&
            (addEditForm.get('workingDays')?.touched || isSubmitted)
          " class="invalid-feedback">
          {{ "language.errors.workingDaysRequired" | translate }}
        </div>
      </div>


      <div class="row">
        <div class="col-md-12 mb-3">
          <label class="form-label">{{ "language.form.description" | translate }}
            <span class="text-danger"></span></label>
          <textarea class="form-control" formControlName="description"
            [placeholder]="'language.placeholders.description' | translate" [ngClass]="{
              'is-invalid':
                addEditForm.get('description')?.invalid &&
                (addEditForm.get('description')?.touched || isSubmitted)
            }"></textarea>
          <div *ngIf="
              addEditForm.get('description')?.invalid &&
              (addEditForm.get('description')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.descriptionRequired" | translate }}
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-12 text-right">
          <button type="button" class="btn btn-light-danger font-weight-bold button-spacing mr-3" (click)="goBack()">
            {{ "language.generic.back" | translate }}
          </button>
          <button type="submit" class="btn btn-primary font-weight-bold me-3" [disabled]="!this.addEditForm.valid">
            {{ "language.generic.submit" | translate }}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>

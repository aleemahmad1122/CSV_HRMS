<div class="d-flex flex-column-fluid px-3">
  <div class="card card-custom w-100 px-3">
    <form [formGroup]="addEditForm" class="form w-100 py-5" id="kt_form_1" (ngSubmit)="submitForm()">
      <div class="row">
        <div class="col-md-12 mb-3">
          <label class="form-label">{{ "language.form.title" | translate }}
            <span class="text-danger">*</span></label>
          <input type="text" class="form-control" formControlName="name"
            [placeholder]="'language.placeholders.title' | translate" [ngClass]="{
              'is-invalid':
                addEditForm.get('name')?.invalid &&
                (addEditForm.get('name')?.touched || isSubmitted)
            }" />
          <div *ngIf="
              addEditForm.get('name')?.invalid &&
              (addEditForm.get('name')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.titleRequired" | translate }}
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ "language.generic.startTime" | translate }}
            <span class="text-danger">*</span></label>

          <dp-date-picker class="form-control" [mode]="'time'" formControlName="startTime" placeholder="00:00"
            [config]="datePickerConfig" theme="dp-material" (change)="onDateTimeChange($event,'startTime')" [ngClass]="{
              'is-invalid':
                addEditForm.get('startTime')?.invalid &&
                (addEditForm.get('startTime')?.touched || isSubmitted)
            }"></dp-date-picker>

          <div *ngIf="
              addEditForm.get('startTime')?.invalid &&
              (addEditForm.get('startTime')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.startTimeequired" | translate }}
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label class="form-label">{{ "language.generic.endTime" | translate }}
            <span class="text-danger">*</span></label>
          <dp-date-picker class="form-control" [mode]="'time'" formControlName="endTime" placeholder="00:00"
            [config]="datePickerConfig" theme="dp-material" (change)="onDateTimeChange($event,'endTime')" [ngClass]="{
              'is-invalid':
                addEditForm.get('endTime')?.invalid &&
                (addEditForm.get('endTime')?.touched || isSubmitted)
            }"></dp-date-picker>
          <div *ngIf="
                  addEditForm.get('endTime')?.invalid &&
                  (addEditForm.get('endTime')?.touched || isSubmitted)
                " class="invalid-feedback">
              {{ "language.errors.endTimeequired" | translate }}
          </div>
        </div>
      </div>

      <div class="row">

        <div class="col-md-6 mb-3">
          <label class="form-label">{{ "language.generic.earlyMinutes" | translate }}
            <span class="text-danger">*</span></label>

          <ng-select [items]="timeList" [bindLabel]="null" [bindValue]="null" [searchable]="true"
            placeholder="Select an option" formControlName="earlyMinutes" [ngClass]="{
    'is-invalid':
            addEditForm.get('earlyMinutes')?.invalid &&
            (addEditForm.get('earlyMinutes')?.touched || isSubmitted)
    }">
          </ng-select>
          <div *ngIf="
              addEditForm.get('earlyMinutes')?.invalid &&
              (addEditForm.get('earlyMinutes')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.earlyMinutesRequired" | translate }}
          </div>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">{{ "language.generic.graceMinutes" | translate }}
            <span class="text-danger">*</span></label>

          <ng-select [items]="timeList" [bindLabel]="null" [bindValue]="null" [searchable]="true"
            placeholder="Select an option" formControlName="graceMinutes" [ngClass]="{
    'is-invalid':
            addEditForm.get('graceMinutes')?.invalid &&
            (addEditForm.get('graceMinutes')?.touched || isSubmitted)
    }">
          </ng-select>
          <div *ngIf="
              addEditForm.get('graceMinutes')?.invalid &&
              (addEditForm.get('graceMinutes')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.graceMinutesRequired" | translate }}
          </div>
        </div>
      </div>


      <div class="col-md-12 mb-3">
        <label class="form-label">
          {{ "language.generic.workingDays" | translate }}
          <span class="text-danger">*</span>
        </label>
        <div class="days-btn-container mx-auto">
          <input
            class="day-btn"
            id="monday"
            type="checkbox"
            [checked]="selectedDays.includes('Monday')"
            (change)="onDayChange('Monday', $event)"
          />
          <label class="day-label" for="monday">{{"language.generic.monday" | translate}}</label>

          <input
            class="day-btn"
            id="tuesday"
            type="checkbox"
            [checked]="selectedDays.includes('Tuesday')"
            (change)="onDayChange('Tuesday', $event)"
          />
          <label class="day-label" for="tuesday">{{"language.generic.tuesday" | translate}}</label>

          <input
            class="day-btn"
            id="wednesday"
            type="checkbox"
            [checked]="selectedDays.includes('Wednesday')"
            (change)="onDayChange('Wednesday', $event)"
          />
          <label class="day-label" for="wednesday">{{"language.generic.wednesday" | translate}}</label>

          <input
            class="day-btn"
            id="thursday"
            type="checkbox"
            [checked]="selectedDays.includes('Thursday')"
            (change)="onDayChange('Thursday', $event)"
          />
          <label class="day-label" for="thursday">{{"language.generic.thursday" | translate}}</label>

          <input
            class="day-btn"
            id="friday"
            type="checkbox"
            [checked]="selectedDays.includes('Friday')"
            (change)="onDayChange('Friday', $event)"
          />
          <label class="day-label" for="friday">{{"language.generic.friday" | translate}}</label>

          <input
            class="day-btn"
            id="saturday"
            type="checkbox"
            [checked]="selectedDays.includes('Saturday')"
            (change)="onDayChange('Saturday', $event)"
          />
          <label class="day-label" for="saturday">{{"language.generic.saturday" | translate}}</label>

          <input
            class="day-btn"
            id="sunday"
            type="checkbox"
            [checked]="selectedDays.includes('Sunday')"
            (change)="onDayChange('Sunday', $event)"
          />
          <label class="day-label" for="sunday">{{"language.generic.sunday" | translate}}</label>
        </div>


        <div *ngIf="
            addEditForm.get('workingDays')?.invalid &&
            (addEditForm.get('workingDays')?.touched || isSubmitted)
          " class="invalid-feedback">
          {{ "language.errors.workingDaysRequired" | translate }}
        </div>
      </div>

      <div class="row">
        <div class="col-md-12 mb-3">
          <label class="form-label">{{ "language.form.description" | translate }}
            <span class="text-danger"></span></label>
          <textarea class="form-control" formControlName="description"
            [placeholder]="'language.placeholders.description' | translate" [ngClass]="{
              'is-invalid':
                addEditForm.get('description')?.invalid &&
                (addEditForm.get('description')?.touched || isSubmitted)
            }"></textarea>
          <div *ngIf="
              addEditForm.get('description')?.invalid &&
              (addEditForm.get('description')?.touched || isSubmitted)
            " class="invalid-feedback">
            {{ "language.errors.descriptionRequired" | translate }}
          </div>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-12 text-right">
          <button type="button" class="btn btn-light-danger font-weight-bold button-spacing mr-3" (click)="goBack()">
            {{ "language.generic.back" | translate }}
          </button>
          <button type="submit" class="btn btn-primary font-weight-bold me-3" [disabled]="!this.addEditForm.valid">
            {{ "language.generic.submit" | translate }}
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
